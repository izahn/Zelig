<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ARIMA • Zelig</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">Zelig Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/quickstart.html">Quickstart</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html#section-zelig-overview">Zelig Overview</a>
    </li>
    <li>
      <a href="../articles/index.html#section-core-zelig-model-details">Zelig Model Details</a>
    </li>
    <li>
      <a href="../articles/index.html#section-other">Other</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Function Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html#section-main-zelig-workflow">Workflow</a>
    </li>
    <li>
      <a href="../reference/index.html#section-estimation-methods">Estimation Methods</a>
    </li>
    <li>
      <a href="../reference/index.html#section-exterior-interaction-functions">Interacting Outside of Zelig</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/about.html">Contact/Development Team/Citation</a>
    </li>
    <li>
      <a href="../articles/roadmap.html">Development Roadmap</a>
    </li>
    <li>
      <a href="https://iqss.github.io/rpackagemetrics/">Zelig Adoption Metrics</a>
    </li>
    <li>
      <a href="https://raw.githubusercontent.com/IQSS/Zelig/master/.iqss_reportcard.yml">Statistical Software Devepment Reportcard</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://medium.com/zelig-dev/archive">
    <span class="fa fa-medium"></span>
     
    Dev-Blog
  </a>
</li>
<li>
  <a href="https://twitter.com/zeligproject">
    <span class="fa fa-twitter fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/IQSS/Zelig">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>ARIMA</h1>
            
            <h4 class="date">2017-11-03</h4>
          </div>

    
    
<div class="contents">
<p><em>Built using Zelig version 5.1.4</em></p>
<hr>
<blockquote>
<p>++++ All Zelig time series models will be deprecated on 1 February 2018 ++++</p>
</blockquote>
<p>Autoregressive and Moving-Average Models with Integration for Time-Series Data</p>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div id="single-series" class="section level3">
<h3 class="hasAnchor">
<a href="#single-series" class="anchor"></a>Single Series</h3>
<p>Attach sample data, which has left party seat share and unemployment across time in several countries. We will subset to just those observations from the United Kingdom:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(forecast)
<span class="kw">data</span>(seatshare)
subset &lt;-<span class="st"> </span>seatshare[seatshare<span class="op">$</span>country <span class="op">==</span><span class="st"> "UNITED KINGDOM"</span>,]</code></pre></div>
<p>Estimate model:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ts.out &lt;-<span class="st"> </span>zarima<span class="op">$</span><span class="kw">new</span>()
ts.out<span class="op">$</span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(unemp <span class="op">~</span><span class="st"> </span>leftseat, <span class="dt">order =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">data =</span> subset)

subset<span class="op">$</span>unemp &lt;-<span class="st"> </span><span class="kw">with</span>(subset, <span class="kw">ts</span>(unemp, <span class="dt">start =</span> <span class="kw">min</span>(year), <span class="dt">end =</span> <span class="kw">max</span>(year)))
tsm &lt;-<span class="st"> </span><span class="kw">with</span>(subset, <span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/Arima">Arima</a></span>(unemp, <span class="dt">xreg =</span> leftseat, <span class="dt">order =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>)))</code></pre></div>
<p>Summarize estimated model parameters:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(tsm)</code></pre></div>
<pre><code>## Series: unemp 
## Regression with ARIMA(1,0,1) errors 
## 
## Coefficients:
##          ar1     ma1  intercept  leftseat
##       0.9028  0.8365     6.5782   -4.0245
## s.e.  0.0606  0.0986     1.9840    1.6622
## 
## sigma^2 estimated as 0.5872:  log likelihood=-44.85
## AIC=99.71   AICc=101.53   BIC=108.03</code></pre>
<p>Next we simulate what happens when leftseat share drops from a moderately high level of 75 percent, to a rather low level of 25 percent:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tsm.ls75 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/forecast">forecast</a></span>(tsm, <span class="dt">xreg =</span> <span class="kw">rep</span>(<span class="fl">0.75</span>, <span class="dv">10</span>))
tsm.ls25 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/forecast">forecast</a></span>(tsm, <span class="dt">xreg =</span> <span class="kw">rep</span>(<span class="fl">0.25</span>, <span class="dv">10</span>))

<span class="kw">plot</span>(tsm.ls75, <span class="dt">main =</span> <span class="st">"leftseat = 0.75"</span>)</code></pre></div>
<p><img src="zelig_arima_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(tsm.ls25, <span class="dt">main =</span> <span class="st">"leftseat = 0.25"</span>)</code></pre></div>
<p><img src="zelig_arima_files/figure-html/unnamed-chunk-5-2.png" width="672"></p>
</div>
<div id="ar-and-ma-models" class="section level3">
<h3 class="hasAnchor">
<a href="#ar-and-ma-models" class="anchor"></a>AR and MA Models</h3>
<p>AR (Autoregressive) and MA (Moving Average) models are commonly used in time series analysis. As both AR and MA models are special cases of ARIMA models they are not implemented as separate models within Zelig. Specification of AR and MA models can be accomplished by changing the value of the <code>order</code> parameter within the ARIMA model.</p>
<div id="ar" class="section level4">
<h4 class="hasAnchor">
<a href="#ar" class="anchor"></a>AR</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tsm2 &lt;-<span class="st"> </span><span class="kw">with</span>(subset, <span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/Arima">Arima</a></span>(unemp, <span class="dt">xreg =</span> leftseat, <span class="dt">order =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>)))
<span class="kw">summary</span>(tsm2)</code></pre></div>
</div>
<div id="ma" class="section level4">
<h4 class="hasAnchor">
<a href="#ma" class="anchor"></a>MA</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tsm3 &lt;-<span class="st"> </span><span class="kw">with</span>(subset, <span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/Arima">Arima</a></span>(unemp, <span class="dt">xreg =</span> leftseat, <span class="dt">order =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>)))</code></pre></div>
</div>
</div>
<div id="arima" class="section level3">
<h3 class="hasAnchor">
<a href="#arima" class="anchor"></a>ARIMA</h3>
<p>The forecast package can help you choose an auto-regressive structure.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tsm4 &lt;-<span class="st"> </span><span class="kw">with</span>(subset, <span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/auto.arima">auto.arima</a></span>(unemp, <span class="dt">xreg =</span> leftseat))

tsm4.ls75 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/forecast">forecast</a></span>(tsm4, <span class="dt">xreg =</span> <span class="kw">rep</span>(<span class="fl">0.75</span>, <span class="dv">10</span>))
tsm4.ls25 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/forecast">forecast</a></span>(tsm4, <span class="dt">xreg =</span> <span class="kw">rep</span>(<span class="fl">0.25</span>, <span class="dv">10</span>))

<span class="kw">plot</span>(tsm4.ls75, <span class="dt">main =</span> <span class="st">"leftseat = 0.75"</span>)</code></pre></div>
<p><img src="zelig_arima_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(tsm4.ls25, <span class="dt">main =</span> <span class="st">"leftseat = 0.25"</span>)</code></pre></div>
<p><img src="zelig_arima_files/figure-html/unnamed-chunk-8-2.png" width="672"></p>
</div>
<div id="multiple-series" class="section level3">
<h3 class="hasAnchor">
<a href="#multiple-series" class="anchor"></a>Multiple Series</h3>
<p>The dataset contains similar series for 11 different OECD countries, and we could run the same model on each country’s data. Here we need to specify the <code>ts</code> and <code>cs</code> arguments to identify the names of variables that give the time and cross-section of each observation in the dataset</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(purrr)</code></pre></div>
<pre><code>## 
## Attaching package: 'purrr'</code></pre>
<pre><code>## The following object is masked from 'package:Zelig':
## 
##     reduce</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">seatshare &lt;-<span class="st"> </span><span class="kw">split</span>(seatshare, seatshare<span class="op">$</span>country)
seatshare &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/purrr/topics/map">map</a></span>(seatshare, <span class="op">~</span><span class="st"> </span><span class="kw">transform</span>(., <span class="dt">unemp =</span> <span class="kw">ts</span>(unemp, <span class="dt">start =</span> <span class="kw">min</span>(year), <span class="dt">end =</span> <span class="kw">max</span>(year))))

tsm.all &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/purrr/topics/map">map</a></span>(seatshare, <span class="op">~</span><span class="st"> </span><span class="kw">with</span>(., <span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/Arima">Arima</a></span>(unemp, <span class="dt">xreg =</span> leftseat, <span class="dt">order =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>))))

<span class="kw"><a href="http://www.rdocumentation.org/packages/purrr/topics/map">map</a></span>(tsm.all, summary)</code></pre></div>
<pre><code>## $AUSTRALIA
## Series: unemp 
## Regression with ARIMA(0,0,1) errors 
## 
## Coefficients:
##          ma1  intercept  leftseat
##       0.8845      4.342    4.3000
## s.e.  0.0792      1.553    3.2415
## 
## sigma^2 estimated as 2.92:  log likelihood=-61.74
## AIC=131.47   AICc=132.96   BIC=137.34
## 
## $AUSTRIA
## Series: unemp 
## Regression with ARIMA(0,0,1) errors 
## 
## Coefficients:
##          ma1  intercept  leftseat
##       0.8344    19.6087  -33.5615
## s.e.  0.0866     3.3434    7.1005
## 
## sigma^2 estimated as 0.6703:  log likelihood=-46.57
## AIC=101.15   AICc=102.32   BIC=107.8
## 
## $CANADA
## Series: unemp 
## Regression with ARIMA(0,0,1) errors 
## 
## Coefficients:
##          ma1  intercept  leftseat
##       1.0000     9.0824   -2.7129
## s.e.  0.0786     1.1556    2.0919
## 
## sigma^2 estimated as 1.691:  log likelihood=-65.86
## AIC=139.72   AICc=140.9   BIC=146.38
## 
## $FINLAND
## Series: unemp 
## Regression with ARIMA(0,0,1) errors 
## 
## Coefficients:
##          ma1  intercept  leftseat
##       0.8260    14.8002  -11.6683
## s.e.  0.0699    13.9348   17.2170
## 
## sigma^2 estimated as 7.465:  log likelihood=-93.55
## AIC=195.1   AICc=196.28   BIC=201.76
## 
## $FRANCE
## Series: unemp 
## Regression with ARIMA(0,0,1) errors 
## 
## Coefficients:
##         ma1  intercept  leftseat
##       1.000      6.308    1.5203
## s.e.  0.071      0.993    2.0478
## 
## sigma^2 estimated as 4.199:  log likelihood=-74.99
## AIC=157.99   AICc=159.32   BIC=164.21
## 
## $ITALY
## Series: unemp 
## Regression with ARIMA(0,0,1) errors 
## 
## Coefficients:
##          ma1  intercept  leftseat
##       1.0000    13.8927  -13.2540
## s.e.  0.3031     2.9755    6.9032
## 
## sigma^2 estimated as 2.091:  log likelihood=-70.01
## AIC=148.02   AICc=149.2   BIC=154.68
## 
## $NORWAY
## Series: unemp 
## Regression with ARIMA(0,0,1) errors 
## 
## Coefficients:
##          ma1  intercept  leftseat
##       0.8763    10.0796  -14.2477
## s.e.  0.0903     6.1042   12.5582
## 
## sigma^2 estimated as 0.8567:  log likelihood=-35.36
## AIC=78.73   AICc=80.54   BIC=83.91
## 
## $SPAIN
## Series: unemp 
## Regression with ARIMA(0,0,1) errors 
## 
## Coefficients:
##          ma1  intercept  leftseat
##       1.0000     2.4681   29.4049
## s.e.  0.1574     5.4379   10.6881
## 
## sigma^2 estimated as 6.759:  log likelihood=-52.19
## AIC=112.38   AICc=114.74   BIC=116.75
## 
## $SWEDEN
## Series: unemp 
## Regression with ARIMA(0,0,1) errors 
## 
## Coefficients:
##          ma1  intercept  leftseat
##       1.0000    13.5755  -16.6794
## s.e.  0.0788     2.6326    4.1712
## 
## sigma^2 estimated as 1.019:  log likelihood=-53.1
## AIC=114.2   AICc=115.45   BIC=120.64
## 
## $`UNITED KINGDOM`
## Series: unemp 
## Regression with ARIMA(0,0,1) errors 
## 
## Coefficients:
##          ma1  intercept  leftseat
##       1.0000    10.5870  -11.4906
## s.e.  0.0659     1.8956    3.9911
## 
## sigma^2 estimated as 2.643:  log likelihood=-74.58
## AIC=157.16   AICc=158.33   BIC=163.81
## 
## $`UNITED STATES`
## Series: unemp 
## Regression with ARIMA(0,0,1) errors 
## 
## Coefficients:
##          ma1  intercept  leftseat
##       0.8362     4.2744    3.0645
## s.e.  0.0920     2.7464    4.5750
## 
## sigma^2 estimated as 1.013:  log likelihood=-50.36
## AIC=108.71   AICc=110   BIC=115.05</code></pre>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#examples">Examples</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, Olivia Lau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zelig Quickstart Guide • Zelig</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">Zelig Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/quickstart.html">Quickstart</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html#section-zelig-overview">Zelig Overview</a>
    </li>
    <li>
      <a href="../articles/index.html#section-core-zelig-model-details">Zelig Model Details</a>
    </li>
    <li>
      <a href="../articles/index.html#section-other">Other</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Function Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html#section-main-zelig-workflow">Workflow</a>
    </li>
    <li>
      <a href="../reference/index.html#section-estimation-methods">Estimation Methods</a>
    </li>
    <li>
      <a href="../reference/index.html#section-exterior-interaction-functions">Interacting Outside of Zelig</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/about.html">Contact/Development Team/Citation</a>
    </li>
    <li>
      <a href="../articles/roadmap.html">Development Roadmap</a>
    </li>
    <li>
      <a href="https://iqss.github.io/rpackagemetrics/">Zelig Adoption Metrics</a>
    </li>
    <li>
      <a href="https://raw.githubusercontent.com/IQSS/Zelig/master/.iqss_reportcard.yml">Statistical Software Devepment Reportcard</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://medium.com/zelig-dev/archive">
    <span class="fa fa-medium"></span>
     
    Dev-Blog
  </a>
</li>
<li>
  <a href="https://twitter.com/zeligproject">
    <span class="fa fa-twitter fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/IQSS/Zelig">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Zelig Quickstart Guide</h1>
            
            <h4 class="date">2017-11-03</h4>
          </div>

    
    
<div class="contents">
<p><em>Built using Zelig version 5.1.4</em></p>
<div id="workflow-overview" class="section level2">
<h2 class="hasAnchor">
<a href="#workflow-overview" class="anchor"></a>Workflow overview</h2>
<p>Models in R can generally be fit using a formula interface. The fitted models can then be explored and post-processed in various was, for example to display an ANOVA-style table, calculate confidence intervals, or plot predictions from the model.</p>
</div>
<div id="examples" class="section level1">
<h1 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h1>
<p>Let’s walk through an example. This example uses the swiss dataset. It contains data on fertility and socioeconomic factors in Switzerland’s 47 French-speaking provinces in 1888 (Mosteller and Tukey, 1977, 549-551). We will model the effect of education on fertility, where education is measured as the percent of draftees with education beyond primary school and fertility is measured using the common standardized fertility measure (see Muehlenbein (2010, 80-81) for details).</p>
<div id="installing-and-loading-zelig" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-and-loading-zelig" class="anchor"></a>Installing and Loading Zelig</h2>
<p>If you haven’t already done so, open your R console and install Zelig. We recommend installing Zelig with the zeligverse package. This installs core Zelig and ancillary packages at once.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">'zeligverse'</span>)</code></pre></div>
<p>Alternatively you can install the development version of Zelig with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">'IQSS/Zelig'</span>)</code></pre></div>
<p>Once Zelig is installed, load it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(zeligverse)</code></pre></div>
</div>
<div id="building-models" class="section level2">
<h2 class="hasAnchor">
<a href="#building-models" class="anchor"></a>Building Models</h2>
<p>Let’s assume we want to estimate the effect of education on fertility. Since fertility is a continuous variable, least squares is an appropriate model choice. To estimate our model, we call the <code>lm</code> function with two arguments: equation and data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load data</span>
<span class="kw">data</span>(swiss)

<span class="co"># estimate ls model</span>
z5_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">lm</span>(Fertility <span class="op">~</span><span class="st"> </span>Education, <span class="dt">data =</span> swiss)

<span class="co"># model summary</span>
<span class="kw">summary</span>(z5_<span class="dv">1</span>)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Fertility ~ Education, data = swiss)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -17.036  -6.711  -1.011   9.526  19.689 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  79.6101     2.1041  37.836  &lt; 2e-16 ***
## Education    -0.8624     0.1448  -5.954 3.66e-07 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 9.446 on 45 degrees of freedom
## Multiple R-squared:  0.4406, Adjusted R-squared:  0.4282 
## F-statistic: 35.45 on 1 and 45 DF,  p-value: 3.659e-07</code></pre>
<p>The -0.86 coefficient on education suggests a negative relationship between the education of a province and its fertility rate. More precisely, for every one percent increase in draftees educated beyond primary school, the fertility rate of the province decreases 0.86 units. To help us better interpret this finding, we may want other quantities of interest, such as expected values or first differences. The <code>margins</code> package makes this simple by automating the translation of model estimates into interpretable quantities of interest. For example, let’s say we want to examine the effect of increasing the percent of draftees educated from 5 to 15. There are several packages we can use for this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set education to 5 and 15</span>
<span class="kw">library</span>(margins)
<span class="kw">library</span>(prediction)
<span class="kw">library</span>(effects)</code></pre></div>
<pre><code>## Loading required package: carData</code></pre>
<pre><code>## lattice theme set by effectsTheme()
## See ?effectsTheme for details.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lsmeans)</code></pre></div>
<pre><code>## Loading required package: estimability</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)</code></pre></div>
<pre><code>## 
## Attaching package: 'dplyr'</code></pre>
<pre><code>## The following object is masked from 'package:MASS':
## 
##     select</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## effects package
ef1 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/effects/topics/effect">Effect</a></span>(<span class="st">"Education"</span>, z5_<span class="dv">1</span>, <span class="dt">xlevels =</span> <span class="kw">list</span>(<span class="dt">Education =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">15</span>)))
<span class="kw">as.data.frame</span>(ef1)</code></pre></div>
<pre><code>##   Education      fit       se    lower    upper
## 1         5 75.29831 1.627387 72.02058 78.57603
## 2        15 66.67480 1.495900 63.66191 69.68770</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(ef1)</code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## lsmeans package
(lsm1 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/lsmeans/topics/lsmeans">lsmeans</a></span>(z5_<span class="dv">1</span>, <span class="st">"Education"</span>, <span class="dt">at =</span> <span class="kw">list</span>(<span class="dt">Education =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">15</span>))))</code></pre></div>
<pre><code>##  Education   lsmean       SE df lower.CL upper.CL
##          5 75.29831 1.627387 45 72.02058 78.57603
##         15 66.67480 1.495900 45 63.66191 69.68770
## 
## Confidence level used: 0.95</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(lsm1d &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/lsmeans/topics/contrast">pairs</a></span>(lsm1))</code></pre></div>
<pre><code>##  contrast estimate       SE df t.ratio p.value
##  5 - 15   8.623503 1.448447 45   5.954  &lt;.0001</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(lsm1)</code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-6-2.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(lsm1d)</code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-6-3.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## margins package (under development)
ppred1 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/margins/topics/reexports">prediction</a></span>(z5_<span class="dv">1</span>, <span class="dt">at =</span> <span class="kw">list</span>(<span class="dt">Education =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">15</span>)))
<span class="kw"><a href="http://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(ppred1, Education), <span class="kw">mean</span>(fitted), <span class="kw">mean</span>(se.fitted))</code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   Education `mean(fitted)` `mean(se.fitted)`
##       &lt;dbl&gt;          &lt;dbl&gt;             &lt;dbl&gt;
## 1         5       75.29831          1.627387
## 2        15       66.67480          1.495900</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="http://www.rdocumentation.org/packages/margins/topics/cplot">cplot</a></span>(z5_<span class="dv">1</span>)</code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-6-4.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mrgn1 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/margins/topics/margins">margins</a></span>(z5_<span class="dv">1</span>, <span class="dt">variables =</span> <span class="st">"Education"</span>, <span class="dt">change =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">15</span>))
<span class="kw"><a href="http://www.rdocumentation.org/packages/lsmeans/topics/summary">summary</a></span>(mrgn1)</code></pre></div>
<pre><code>##     factor     AME     SE       z      p    lower   upper
##  Education -8.6235 1.4484 -5.9536 0.0000 -11.4624 -5.7846</code></pre>
</div>
</div>
<div id="visualizations" class="section level1">
<h1 class="hasAnchor">
<a href="#visualizations" class="anchor"></a>Visualizations</h1>
<p>Each of the post-estimation packages noted above offers some visualization capabilities.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set education to 5 and 15</span>
<span class="kw">library</span>(margins)
<span class="kw">library</span>(prediction)
<span class="kw">library</span>(effects)
<span class="kw">library</span>(lsmeans)
<span class="kw">library</span>(dplyr)

## effects package
<span class="kw">plot</span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/effects/topics/effect">Effect</a></span>(<span class="st">"Education"</span>, z5_<span class="dv">1</span>))</code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## lsmeans package
<span class="kw">plot</span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/lsmeans/topics/lsmeans">lsmeans</a></span>(z5_<span class="dv">1</span>, <span class="st">"Education"</span>, <span class="dt">at =</span> <span class="kw">list</span>(<span class="dt">Education =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">60</span>)))</code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-7-2.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## margins package (under development)
<span class="kw"><a href="http://www.rdocumentation.org/packages/margins/topics/cplot">cplot</a></span>(z5_<span class="dv">1</span>)</code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-7-3.png" width="672"></p>
</div>
<div id="getting-help" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-help" class="anchor"></a>Getting help</h1>
<p>Within R you can access function help using the <code>?</code> function, e.g.:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?lm
?Effect</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#workflow-overview">Workflow overview</a></li>
      <li>
<a href="#examples">Examples</a><ul class="nav nav-pills nav-stacked">
<li><a href="#installing-and-loading-zelig">Installing and Loading Zelig</a></li>
      <li><a href="#building-models">Building Models</a></li>
      </ul>
</li>
      <li><a href="#visualizations">Visualizations</a></li>
      <li><a href="#getting-help">Getting help</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, Olivia Lau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
